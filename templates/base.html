<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>{{ title }}</title>
  <style>
    body { font-family: Helvetica, Arial; margin: 40px; }
    .container { max-width: 600px; margin: 0 auto; }
    input { display: block; margin: 6px 0; padding: 8px; width: 100%; }
    .flash { padding: 8px; border-radius: 6px; margin-bottom: 10px; }
    .error { background: #ffdede; }
    .ok { background: #e5ffe5; }
  </style>
</head>
<body>
  <div class="container">
    <h1>{{ title }}</h1>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for cat, msg in messages %}
          <div class="flash {{ 'error' if cat == 'error' else 'ok' }}">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    {% block body %}{% endblock %}
    <hr>
    {% if session.username %}
      <small>Conectado como <strong>{{ session.username }}</strong> — 
      <a href="{{ url_for('profile') }}">Perfil</a> — 
      <a href="{{ url_for('logout') }}">Cerrar sesión</a></small>
    {% else %}
      <small><a href="{{ url_for('login') }}">Iniciar sesión</a> · 
      <a href="{{ url_for('register') }}">Registrarse</a></small>
    {% endif %}
  </div>
</body>
</html>
